<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Preferencias</title>

	<%- include('../../partials/head-preferencias'); %>
	<style>
		#preferencias_menu {
			background-color: bisque;
		}
		#booking {
			height: 70vh!important;
		}
	</style>
</head>

<body>
	<header>
        <%- include('../../partials/header'); %>
    </header>
	<div id="booking" class="section">
		<div class="section-center">
			<div class="container">
				<div class="row">
					<div class="booking-form">
						<div class="booking-bg">
							<div class="form-header">
								<h2>Preferencias</h2>
								<p>Esta pagina le permitira editar/a単adir tipos(colores) de melanina, editar el tama単o de cinta, etc..</p>
							</div>
						</div>
						<form>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<span class="form-label">Cantidad Maxima</span>
										<select class="form-control">
											<option>1</option>
											<option>2</option>
											<option>3</option>
											<option>4</option>
											<option selected>5</option>
											<option>6</option>
											<option>7</option>
											<option>8</option>
											<option>9</option>
											<option>10</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<span class="form-label">Color por defecto</span>
										<select class="form-control">
						                	<option >Noguera Caiena</option>
											<option selected>Blanco</option>
											<option >Carvhallo Evora</option>
											<option >WEngue Ravera B</option>
											<option >Blanco Berneck</option>
											<option >Nogueira</option>
											<option >Negro</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
							</div>
							<div class="form-group">
								<select id="catalogos" class="form-control" required onchange="selectEditableTable(this)" >
									<option selected value="color">Colores existentes</option>
									<option value="marca">Marcas existentes</option>
									<option value="unidad">Unidades existentes</option>
									<option value="medidas">Medidas Existentes</option>
									<option value="provedor">Provedor Existentes</option>
									<option value="item">Productos Existentes</option>
									<option value="Cliente">Clientes</option>
									<option value="melamina">Catalogo Melaminas</option>
									<option value="tapacantos">Catalogo Tapacantos</option>
									<option value="pegamento">Catalogo Pegamentos</option>
									<option value="fondo">Catalogo Fondos</option>
								</select>
								<span class="select-arrow"></span>
								<!-- <span class="form-label"><button class="form-btn" onclick="DisplayMelaninaEditForm(true); return false;">Editar</button></span>
								<span class="form-label"><button class="form-btn" onclick="DisplayMelaninaForm(true); return false;">A単adir</button></span>
								<span class="form-label"><button class="form-btn" onclick="DisplayMelaninaDeleteForm(true); return false;">Borrar</button></span>-->
								<span class="select-arrow"></span>
							</div>
							<div class="form-btn">
								<button class="submit-btn">Guardar</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- table secction -->	
	<style>  
	     /*@import url('https://fonts.googleapis.com/css?family=Montserrat:400,500');  */
	    .container_table {  
	      /*font-family: 'Montserrat', sans-serif;  */
	      padding: 0;  
	      margin: 0;  
	      text-align: center;
	      background-color: rgba(133, 104, 73, 0.33);
	      padding-bottom: 30px;
	    }  
	    tr:nth-of-type(odd) {   
	        background: #eee;   
	    }  
	    th {   
	        background: #3498db;   
	        color: white;   
	        font-weight: bold;   
	    }  
	      
	    @import "compass/css3";  
	    .table-editable {  
	        position: relative;
		    background-color: white;
	        width: 750px!important;   
	        border-collapse: collapse;   
	        margin:50px auto;  
	      .glyphicon {  
	        font-size: 20px;  
	      }  
	    }  
	    td, th {   
	        padding: 10px;   
	        border: 1px solid #ccc;   
	        text-align: left;   
	        font-size: 18px;  
	    }  
	    .table-remove {  
	      color: #700;  
	      cursor: pointer;  
	      &:hover {  
	        color: #f00;  
	      }  
	    }  
	    .table-up {  
	      color: #007;  
	      cursor: pointer;  
	      &:hover {  
	        color: #00f;  
	      }  
	    }  
	    .table-down {  
	      color: #007;  
	      cursor: pointer;  
	      &:hover {  
	        color: #00f;  
	      }  
	    }  
	    .table-add {  
	      color: #070;  
	      cursor: pointer;  
	      position: absolute;  
	      top: 8px;  
	      right: 0;  
	      &:hover {  
	        color: #0b0;  
	      }  
	    }  
    </style>
    <div id="color" class="container_table">  
      <span class="form-label"><h5>Colores   <button type="button" onclick="add_row()">+</button></h5></span>
      <div class="table-editable">  
        <table class="table" id="color_data_table">
          <tr>  
            <th> Nombre </th>  
            <th> Codigo </th>  
            <th> Melamina </th>  
            <th> Tapacantos </th>  
            <th> Fondos </th>
            <th></th>
          </tr>
           <% for (let index = 0; index < color.length; index++) { 
           		var ID = color[index]._id.toString() %>
			<tr id="row_<%= ID %>">  
            	<td contenteditable="true" id="c_nombre_<%= ID %>"><%= color[index].nombre %></td>  
            	<td contenteditable="true" id="c_codigo_<%= ID %>"><%= color[index].codigo %></td>  
                <td><input type="checkbox" id="c_melamina_<%= ID %>" <%=(color[index].melamina == true)?'checked':'' %> /></td>
                <td><input type="checkbox" id="c_tapacantos_<%= ID %>" <%=(color[index].tapacantos == true)?'checked':'' %> /></td>
                <td><input type="checkbox" id="c_fondo_<%= ID %>" <%=(color[index].fondo == true)?'checked':'' %> /></td>
            	<td>
            		<button type="button" title="Guardar" id="gc_<%= ID %>" onclick="guardarEditado(this.id)">o</button>
            		<button type="button" title="Borrar" id="bc_<%= ID %>"onclick="borrar(this.id)">X</button>
            	</td>  
          	</tr>    
           <% } %>
        </table>  
      </div>  
    </div>
	<div id="marca" class="container_table">
		<span class="form-label"><h5>Marcas   <button type="button" onclick="add_row()">+</button></h5></span>
		<div class="table-editable">
		  <table class="table" id="marca_data_table">
			<tr>
			  <th> Nombre </th>  
			  <th> Melamina </th>  
			  <th> Tapacantos </th>  
			  <th> Pegamento </th>  
			  <th> Fondos </th>
			  <th></th>
			</tr>
			 <% for (let index = 0; index < marcas.length; index++) {
					 var ID = marcas[index]._id.toString() %>
			  <tr id="row_<%= ID %>">
				  <td contenteditable="true" id="m_nombre_<%= ID %>"><%= marcas[index].nombre %></td>  
				  <td><input type="checkbox" id="m_melamina_<%= ID %>" <%=(marcas[index].melamina == true)?'checked':'' %> /></td>
				  <td><input type="checkbox" id="m_tapacantos_<%= ID %>" <%=(marcas[index].tapacantos == true)?'checked':'' %> /></td>
				  <td><input type="checkbox" id="m_tapacantos_<%= ID %>" <%=(marcas[index].pegamento == true)?'checked':'' %> /></td>
				  <td><input type="checkbox" id="m_fondo_<%= ID %>" <%=(marcas[index].fondo == true)?'checked':'' %> /></td>
				  <td>
					  <button type="button" title="Guardar" id="gm_<%= ID %>" onclick="guardarEditado(this.id)">o</button>
					  <button type="button" title="Borrar" id="bm_<%= ID %>"onclick="borrar(this.id)">X</button>
				  </td>
				</tr>
			 <% } %>
		  </table>
		</div>
	  </div>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"> </script>
    <script src="javascripts/preferencias.js"></script>
    <script>
		var CATALOGOS = ["color","marca"/*,"unidad","medidas","provedor","item","Cliente","melamina","tapacantos","pegamento","fondo"*/];
		var SELECTED_CATALOGO = "color";
		var objCatalog = null;
	
		$(function() {
			selectEditableTable({value:"color"});
		});

		function selectEditableTable(selectBox) {
			let selectedCatalogo = selectBox.value;
			CATALOGOS.forEach((name) => {
				if (selectedCatalogo == name) {
					SELECTED_CATALOGO = name;
					let obj = SELECTED_CATALOGO.capitalizeFirst();
					console.log(obj);
					objCatalog = new window[obj]();
					document.getElementById(name).style.display = "block";
				} else {
					document.getElementById(name).style.display = "none";
				}
			});
		}

        function add_row() {
		    var table = document.getElementById(SELECTED_CATALOGO + "_data_table");
		    var table_len = table.rows.length;
		    var row = table.insertRow(table_len).outerHTML = objCatalog.getRowBuild(table_len - 1);
		}

        function guardarNuevo(row_id) {
        	row_id = row_id.substr(3);
        	objCatalog.assignar(row_id);
        	objCatalog.guardarNuevo();
		}

		function borrarNuevo(row_id) {
			row_id = row_id.substr(3);
		    document.getElementById("row_" + row_id).outerHTML = "";
		}

     	function guardarEditado(row_id) {
            row_id = row_id.substr(3);
            objCatalog.assignar(row_id);
            objCatalog.guardarEditado(row_id);
		}

		function borrar(row_id) {
            row_id = row_id.substr(3);
            objCatalog.borrar(row_id);
		}
    </script>


		<div id="melanina_add" class="col-md-4">
			<div class="form-group">
				<h1 class="form-label">A単adir Melanina</h1>
				<br>
				<form action="" method="get">
					<input class="form-control" type="text" id="Nombre" name="Nombre" placeholder="Nombre">
					<br>
					<input class="form-control" type="text" id="Industria" name="Industria" placeholder="Industria">
					<br>
					<input class="form-control" type="text" id="Color" name="Color" placeholder="Color">
					<br>
					<button class="submit-btn light-btn" onclick="DisplayMelaninaForm(false); return false;">Guardar</button>
					<button class="submit-btn light-btn" onclick="DisplayMelaninaForm(false); return false;">Salir</button>
				</form>
			</div>
		</div>

		<div id="melanina_edit" class="col-md-4">
			<div class="form-group">
				<h1 class="form-label">Melanina a editar</h1>
				<select class="form-control edit-select" required onchange="getMelaninaToEdit(this.selectedIndex); return false;">
					<option value="c1">Blanco</option>
					<option value="c2">Noguera Caiena</option>
					<option value="c3">Carvhallo Evora</option>
					<option value="c4">Wengue Ravera B</option>
					<option value="c5">Blanco Berneck</option>
					<option value="c6">Nogueira</option>
					<option value="c7">Negro</option>
				</select>
				<br>
				<form action="" method="get">
					<input class="form-control" type="text" id="NombreE" name="Nombre" placeholder="Nombre">
					<br>
					<input class="form-control" type="text" id="IndustriaE" name="Industria" placeholder="Industria">
					<br>
					<select class="form-control" id="ColorE" onchange="getMelaninaToEditColor(); return false;">
						<option value="White">White</option>
						<option value="AliceBlue">AliceBlue</option>
						<option value="AntiqueWhite">AntiqueWhite</option>
						<option value="Aqua">Aqua</option>
						<option value="Aquamarine">Aquamarine</option>
						<option value="Azure">Azure</option>
						<option value="Beige">Beige</option>
						<option value="Bisque">Bisque</option>
						<option value="Black">Black</option>
						<option value="BlanchedAlmond">BlanchedAlmond</option>
						<option value="Blue">Blue</option>
						<option value="BlueViolet">BlueViolet</option>
						<option value="Brown">Brown</option>
					</select>
					<br>
					<button class="submit-btn light-btn" onclick="DisplayMelaninaEditForm(false); return false;">Guardar</button>
					<button class="submit-btn light-btn" onclick="DisplayMelaninaEditForm(false); return false;">Salir</button>
				</form>
			</div>
		</div>
	
		<div id="melanina_delete" class="col-md-4">
			<div class="form-group">
				<h1 class="form-label">Melanina a borrar</h1>
				<select class="form-control delete-select" required onchange="getMelaninaToDelete(this.selectedIndex); return false;">
					<option value="c1">Blanco</option>
					<option value="c2">Noguera Caiena</option>
					<option value="c3">Carvhallo Evora</option>
					<option value="c4">Wengue Ravera B</option>
					<option value="c5">Blanco Berneck</option>
					<option value="c6">Nogueira</option>
					<option value="c7">Negro</option>
				</select>
				<br>
				<form action="" method="get">
					<input class="form-control" type="text" id="NombreD" name="Nombre" placeholder="Nombre">
					<br>
					<input class="form-control" type="text" id="IndustriaD" name="Industria" placeholder="Industria">
					<br>
					<select class="form-control" id="ColorD" onchange="getMelaninaToEditColor(); return false;">
						<option value="White">White</option>
						<option value="AliceBlue">AliceBlue</option>
						<option value="AntiqueWhite">AntiqueWhite</option>
						<option value="Aqua">Aqua</option>
						<option value="Aquamarine">Aquamarine</option>
						<option value="Azure">Azure</option>
						<option value="Beige">Beige</option>
						<option value="Bisque">Bisque</option>
						<option value="Black">Black</option>
						<option value="BlanchedAlmond">BlanchedAlmond</option>
						<option value="Blue">Blue</option>
						<option value="BlueViolet">BlueViolet</option>
						<option value="Brown">Brown</option>
					</select>
					<br>
					<button class="submit-btn light-btn" onclick="DisplayMelaninaDeleteForm(false); return false;">Guardar</button>
					<button class="submit-btn light-btn" onclick="DisplayMelaninaDeleteForm(false); return false;">Salir</button>
				</form>
			</div>
		</div>

		<footer>
			<%- include('../../partials/footer'); %>
		</footer>
</body>

</html>
